<html>
  <head>
    <title>GitOrca</title>
    <link href="index.css" rel="stylesheet" />
  </head>
  <body>
    <h3>GitOrca</h3>
    <p>welcome to GitOrca, search for developers on GitHub</p>
    <select id="language">
      <option value="python">Python</option>
      <option value="java">Java</option>
      <option value="javascript">JavaScript</option>
    </select>
    <button onclick="search()">Search</button>
    <h4>Profiles</h4>
    <table id="profilesTable"></table>
    <script>
      async function getProfiles(url) {
        const response = await fetch(url);
        const profiles = await response.json();
        return profiles;
      }

      async function search() {
        const programmingLanguage = document.getElementById("language").value;
        const table = document.getElementById("profilesTable");

        const url = `https://api.github.com/search/users?q=language:${programmingLanguage}`;
        rowsCount = 0;
        const profiles = await getProfiles(url);
        console.log(profiles)
        for (profile of profiles.items) {
          const row = table.insertRow(rowsCount);
          const cellLogin = row.insertCell(0);
          const cellUrl = row.insertCell(1);
          cellLogin.textContent = profile.login;
          cellUrl.textContent = profile.html_url;
          rowsCount = rowsCount + 1;
        }
      }
    </script>
  </body>
</html>
